(()=>{"use strict";var e={594:(e,t,s)=>{var o=s(938),i=s(45);const a=JSON.parse('{"id":"big-displays","name":"Add big displays","author":"FatcatX and saile515","version":"0.6","description":"Adds big displays: 16x1 8-color, 16x1 shapes","website":"https://github.com/garretsimpson/shapez-mods","minimumGameVersion":">=1.5.0","entry":"./index.js"}'),{globalConfig:n}=shapez,{Loader:r}=shapez,{enumDirection:A,Vector:l}=shapez,{enumColors:p}=shapez,{Component:c}=shapez,{enumPinSlotType:d,WiredPinsComponent:g}=shapez,{GameSystemWithFilter:u}=shapez,{isTrueItem:m,isTruthyItem:x}=shapez,{COLOR_ITEM_SINGLETONS:B}=shapez,{defaultBuildingVariant:I}=shapez,{types:y}=shapez,{Mod:C,ModMetaBuilding:f}=shapez,{typeItemSingleton:w}=shapez,h={x:16,y:1},D="shapes",Q="color",S="shape";class T extends c{static getId(){return"BigDisplay"}static getSchema(){return{index:y.uint,type:y.string,slots:y.fixedSizeArray(y.structured({data:y.nullable(w),value:y.nullable(w)}))}}constructor({index:e=0,type:t="color",slots:s=[]}){super(),this.index=e,this.setType(t),this.setSlots(s)}setType(e){this.type=e}setSlots(e){this.slots=e.map((e=>({pos:e.pos,value:null,data:null})))}}class V extends u{constructor(e){super(e,[T]),this.displaySprites={};for(const e in p)e!==p.uncolored&&(this.displaySprites[e]=r.getSprite("sprites/wires/display/"+e+".png"))}getDisplayItem(e){const t=B[p.uncolored],s=B[p.white];if(!e)return t;switch(e.getItemType()){case"boolean":return m(e)?s:t;case"color":case"shape":return e;default:window.assert(!1,"Unknown item type: "+e.getItemType())}}update(){for(let e of this.allEntities){const t=e.components.BigDisplay;if(!t)continue;const s=e.components.WiredPins,o=s.slots[0];let i;if(i=o.linkedNetwork&&o.linkedNetwork.hasValue()?this.getDisplayItem(o.linkedNetwork.currentValue):B[p.uncolored],t.type===Q){if("color"===i.getItemType())for(let e of t.slots)e.data=i;if("shape"===i.getItemType())for(let e of t.slots){e.data=null;const t=h.x*e.pos.y+e.pos.x,s=i.definition.layers[Math.floor(t/4)];if(!s)continue;const o=s[t%4];o&&(e.data=B[o.color])}}if(t.type===S){const e=t.index;t.index=(e+1)%(h.x*h.y),t.slots[e].data=i}const a=e.uid;let n=s.slots[1],r=!0;for(;r&&n.linkedNetwork&&n.linkedNetwork.providers;){const e=n.linkedNetwork.providers[0].entity;if(!e.components.BigDisplay)break;if(n=e.components.WiredPins.slots[1],e.uid==a)break}let A=!1;if(n.linkedNetwork&&(s.slots[2].value=n.linkedNetwork.currentValue,A=x(n.linkedNetwork.currentValue)),A){t.index=0;for(let e of t.slots)e.value=e.data,e.data=null}}}toColor(e,t,s){const o=e.toString(16).padStart(2,"0"),i=t.toString(16).padStart(2,"0"),a=s.toString(16).padStart(2,"0");return`#${o.toString(16)}${i.toString(16)}${a.toString(16)}`}drawChunk(e,t){const s=t.containedEntitiesByLayer.regular;for(let o of s){if(!o||!o.components.BigDisplay)continue;const s=o.components.BigDisplay.slots;for(let i of s){const s=o.components.StaticMapEntity.localTileToWorld(i.pos);if(!t.tileSpaceRectangle.containsPoint(s.x,s.y))continue;const a=s.toWorldSpaceCenterOfTile(),r=i.value;if(r){if("color"===r.getItemType()){if(r.color===p.uncolored)continue;this.displaySprites[r.color].drawCachedCentered(e,a.x,a.y,n.tileSize)}"shape"===r.getItemType()&&r.drawItemCenteredClipped(a.x,a.y,e,30)}}}}}class M extends f{constructor(){super("bigDisplays")}static getAllVariantCombinations(){return[{variant:I,name:"Color Display (16 x 1)",description:"Displays 16 colors, one for each corner of the connected shape signal.",regularImageBase64:`${o}`,blueprintImageBase64:`${o}`,tutorialImageBase64:`${o}`},{variant:D,name:"Shape Display (16 x 1)",description:"Displays 16 shapes. Connect a stream of shapes to the data input. Then use a truthy signal on the sync input to display the shapes.",regularImageBase64:`${o}`,blueprintImageBase64:`${o}`,tutorialImageBase64:`${o}`}]}getAvailableVariants(){return[I,D]}getSilhouetteColor(){return"#aaaaaa"}getDimensions(){return new l(h.x,h.y)}setupEntityComponents(e){e.addComponent(new g({slots:[{pos:new l(0,0),direction:A.left,type:d.logicalAcceptor},{pos:new l(0,0),direction:A.bottom,type:d.logicalAcceptor},{pos:new l(0,0),direction:A.top,type:d.logicalEjector}]}));const t=h,s=[];for(let e=0;e<t.y;e++)for(let o=0;o<t.x;o++)s.push({pos:new l(o,e)});e.addComponent(new T({slots:s}))}updateVariants(e,t,s){switch(s){case I:e.components.BigDisplay.setType(Q);break;case D:e.components.BigDisplay.setType(S)}}}var E,F;E=class extends C{init(){console.debug("##### Init mod:",a.id),this.modInterface.registerComponent(T),this.modInterface.registerNewBuilding({metaClass:M,buildingIconBase64:`${i}`}),this.modInterface.addNewBuildingToToolbar({toolbar:"regular",location:"secondary",metaClass:M}),this.modInterface.addNewBuildingToToolbar({toolbar:"wires",location:"secondary",metaClass:M}),this.modInterface.registerGameSystem({id:"bigDisplay",systemClass:V,before:"constantSignal",drawHooks:["staticAfter"]})}},delete(F=a).entry,window.$shapez_registerMod(E,F)},938:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAAQCAYAAAD506FJAAABcmlDQ1BpY2MAACiRdZE9S8NQFIbftmpFK0V0kOKQoYpDi0VBHKWCXapDW8GqS3KbtEKShpsUKa6Ci0PBQXTxa/Af6Cq4KgiCIog4+QP8WqTEc5tCi9QTbs7De897uPdcwJ/WmWF3JQDDdHgmlZRW8qtS8A0+RNCDSQzKzLYWsws5/BvfD1RNcR8Xvf6v6xj9BdVmgK+XeIZZ3CGeI05vOpbgXeJhVpILxMfEMU4HJL4RuuLxq+Cix5+CeS4zD/hFT6nYxkobsxI3iCeIo4ZeYc3ziJuEVHM5SzlCaxQ2MkghCQkKKtiADgdxyibNrLMv0fAtoUweRn8LVXByFFEib4zUCnVVKWukq/TpqIq5/52nrU1Ped1DSaD7xXU/xoDgHlCvue7PievWT4HAM3BltvxlmtPsF+m1lhY9AsLbwMV1S1P2gcsdYOTJkrnckAK0/JoGvJ8DA3lg6A7oW/Nm1dzH2SOQ26InugUODoFxqg+v/wL7P2gIwmXK0wAAAAlwSFlzAAALEgAACxIB0t1+/AAAAKlJREFUeAHt1MEJw0AUQ8E4Lbn/ErampIZn8EWMz9aC5oOuz4Pvvu/fg5gIAQIvCpxzrvr8twb8T4DAjoAB2LmlJgSygAHIZAIEdgQMwM4tNSGQBQxAJhMgsCNgAHZuqQmBLGAAMpkAgR0BA7BzS00IZAEDkMkECOwIGICdW2pCIAsYgEwmQGBHwADs3FITAlnAAGQyAQI7AgZg55aaEMgCBiCTCRDYEfgDEAUEIKzcCDMAAAAASUVORK5CYII="},45:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAABcWlDQ1BpY2MAACiRdZE9S8NQFIbffoiilQ46iBTJUEWkhaIgjlLBLtWhrWDVJblNWiFJw02KFFfBxaHgILr4NfgPdBVcFQRBEUSc/AF+LVLiuU2hRdoTbs7De897uPdcwJ/WmWEHE4BhOjyTSkqr+TWp9x0+RBDEGKZkZltL2cUcusbPI1VTPMRFr+51HWOgoNoM8PURzzKLO8TzxOktxxK8RzzMSnKB+IQ4xumAxLdCVzx+E1z0+Eswz2UWAL/oKRXbWGljVuIG8SRx1NArrHkecZOQaq5kKY/SisBGBikkIUFBBZvQ4SBO2aSZdfYlGr5llMnD6G+hCk6OIkrkjZFaoa4qZY10lT4dVTH3//O0tZlpr3soCfS8uu7nONC7D9Rrrvt76rr1MyDwAlybLX+Z5jT3TXqtpUWPgfAOcHnT0pQD4GoXGHm2ZC43pAAtv6YBHxfAYB4Yugf6171ZNfdx/gTktumJ7oDDI2CC6sMbfwx4aBA5/ohAAAAACXBIWXMAAAsTAAALEwEAmpwYAAAINElEQVR4Ae1dy24cRRQt2+OxHTt2HLATkogoCSHiIZQ1r48AsUVCkEXEAokFRPwASEgIFkhIAbFkAUFiwxpCeOyACBRFxOQBiWWw8rDHduyJbe4x00qmq6qnp7uqum/PvVJpXNU9954657i7pufRfS8fe1VJ9C4D/b07dZk5GBAD9LgPxABigB5noMenL0cAMUCPM9Dj05cjQI8boJY0/09Ofpi0WbYxYsB2vUeOAIxE9AFVDOCDVUY5xQCMxPIBVQzgg1VGOcUAjMTyAVUM4INVRjnFAIzE8gFVDOCDVUY5xQCMxPIBVQzgg1VGOcUAjMTyAVUM4INVRjnFAIzE8gFVDOCDVUY5xQCMxPIBVQzgg1VGOcUAjMTyAVUM4INVRjnFAIzE8gFVDOCDVUY5xQCMxPIBVQzgg1VGOcUAjMTyAVUM4INVRjnFAIzE8gE18ZtBaQpavnEyRs99utUO0CP6Et0z0KCnXKR2ptXQb4u8397KbYA2NEq9Q30I/1RsXLpuGPie0sAMJ9ykU8qVAY4QoI+pQXwJfwzgHytqr9Df5/OWcrEGeI5AnKUm4udVI/3zwTU4B/e5ouMRwHKOj4oCwKmoI49BGaiDe9LneXr80la50xqhowFsiWkch/3PbNu3bRtVY9vHVX2wrvr7XRxobJWqO76xsaHWmmuqsbiglpeXbBOFBk9Qy3Q6yGMAnPPhwrYYGdmmHtizT+FRwg0DU1O71MrKspq99vfWYywrNIAWz8TGU3Wz/mtGq/22IhMTO9SBg4dF/DZW3HTwDwVuwbEhsCaAJl1HVgOgYFsA4N59+1VfX1/buHTcMQBuwbHl6KppkqZyFgPgoo72Oh+HfRE/DeX59gHH4NoQ0KTrC25WAySsHjWnYcFncaUBpwzlZQBcg3NDaNpE+0BPk6ZWA0RPNDxqRbDalwjLgIVzTZtOqLIY4FA8ab2uvRiI7yJ9xwxYONe06VQ2iwG013f9fVnSdIIm25MYsHCuaZOUA9vyXAfolNu4famxqBYWbqmNzQ3j9l4dhKDj4xNqdGx7UAqCGuDmjevq6tUrQSfIqdj16/Nq794H1Y7JncFgBz12z8//E2xiXAuF5iioAe7caXLVJRju0BwFNUAwFqVQagaCrgEsqF6yjPfK8KdFTrQMBvjqsceP3rCR8Pprx2ybWIy/98FJK87ff/tl0rox0AY5BQQiuqxlxABlVSYQLjFAIKLLWkYMUFZlAuESAwQiuqxlxABlVSYQLjFAIKLLWkYMUFZlAuESAwQiuqxlrFcCO3wjKNh8kq6kBQPBuFAnHeUIwFhcF9DFAC5YZJxDDMBYPBfQxQAuWGScQwzAWDwX0MUALlhknEMMwFg8F9DFAC5YZJxDDMBYPBfQxQAuWGScQwzAWDwX0K3vBbhInjLH+/Tp2JS7ym6uGSiDAV50PSnJl54BOQWk56qSewY1wNDQcCVJdDmp0BwFNcDu3XvUwMCAS74qlQvcgKOQEXQNMEI/bHT44UfV0tKiwq9gStxlAL+mOjq6Pfg/SFADYLpw+fi48ccO77IhfwVjIOgpINispFBqBsQAqamq5o5igGrqmnpWYoDUVFVzRzFANXVNPSsxQGqqqrmjGKCauqaeVRYDrMSzy69+xhnx37dwrmnTCUkWA1yOJ22uye//xTnx3bdwrmnTCUcWA3wXT9poLMSHpO+ZAQvnmjadYGQxwJl40qWlhrp9u+ujTzyN9FMyAK7BuSE0bQz7tA1lMcBNyvBTWxbqzM5eVZubm/Fh6TtmAByDa0NAE2jTVWQxAAqcjldZJkdeu/aXmCBOjMM+xAfH4NoQmiaGfbShrAZ4kzL9EM+Gn4O/fGlGra7ejm+Sfk4GwCm4BceGgBbQpOvI83bwcar2a7wizk0zF87Te9tjW3cOHaQ7h4b4EAhupBTqDqX4LANu5Og71tfXVbN151DwmnCKhRaZIo8BzlLFF6h9Hq8MoA26MwhaqDj00BE1PDwSpNza2qq6dPFCkFopikADaJEpsp4ComJf0B8AIFEMA+AeGmSOvAZAYQA4Su1HdCSCMACuwXku8YHUhQGQB2uBJ6m9S+1nahJ+GAC34Bhca+uvLCXzrAFM9d5oDe6iR9zEEHe03k/NxV2QnqU8nOK0A7BY8uPyLq7w4SLPHDWn4doAETgAPdVq0ZjxkW4WYRyPBulrY/gc+Z2oHz1ixT8xMakGBwe3hmq1/x+j7T4fUWt6evdWiWazqW7dumH6lDMMW6P5rSdhKfprcb4MkDTnbrdpt0MdGKipg4cOq3p9qNtcTvav1WpqqmUAJLx/alr9OfOHWl/XfArs3zop6imJqzWAJ3hbaTUD7Nx5X2HimyYKIwKTITTshn0KHeJggH1xhmqtw358vMi+BZOGvUiMptocDKC9xRnyApOJNNOYBZOG3fTcIsc4GACr37ZYpHsPz83N0sIrcX3V9hxfHWAAFmAyhIbdsE+hQ6VfBNIq+gqtlM8RS4/cy9T8v3MKLcT7DPfWjf+N6/WWOAfslm2lGS7cAClfBh0nxr4xsZYggGn3kGPHU84tJCatFodTAEDjpRRMwCWAtdQv/yIiuRgAeD+ixsEEwAisLIKTAUAoiJ2k9ha1r6mFe7+ZilkCGIAFmICNjfiEVRW+BgCILgOfe3v7nueA9CLDet/jIkGlrc3RAPG5sRYgPpnQfW6ngND8VL6eGKDyEidPUAyQzE/lt4oBKi9x8gTFAMn8VH6rGKDyEidPUAyQzE/lt4oBKi9x8gTFAMn8VH6rGKDyEidPUAyQzE/lt4oBKi9x8gT/A727bIZaaWX1AAAAAElFTkSuQmCC"}},t={};!function s(o){var i=t[o];if(void 0!==i)return i.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,s),a.exports}(594)})();